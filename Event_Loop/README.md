# The Node.js Event Loop, Timers, and process.nextTick()


## 什么是 Event Loop ？

Event Loop 通过将 I/O 操作下发到系统内核执行，使单线程 JavaScript 引擎实现非阻塞 I/O 操作。

当前主流操作系统内核实现都是多线程，可同时在后台执行多个操作。当某个操作执行完，系统内核通知 NodeJS 
将对应的回调函数推送到 poll 队列，并最终得以执行。

## Event Loop 详解

NodeJS 启动后初始化 Event Loop，解析执行入口脚本文件，执行脚本中的异步 API 调用，计划任务（timer），
调用 `process.nextTick()`等，然后开始处理 Event Loop。

下图展示了简化的 Event Loop 执行流程：

 ```
   ┌───────────────────────┐
┌─>│        timers         │
│  └──────────┬────────────┘
│  ┌──────────┴────────────┐
│  │     I/O callbacks     │
│  └──────────┬────────────┘
│  ┌──────────┴────────────┐
│  │     idle, prepare     │
│  └──────────┬────────────┘      ┌───────────────┐
│  ┌──────────┴────────────┐      │   incoming:   │
│  │         poll          │<─────┤  connections, │
│  └──────────┬────────────┘      │   data, etc.  │
│  ┌──────────┴────────────┐      └───────────────┘
│  │        check          │
│  └──────────┬────────────┘
│  ┌──────────┴────────────┐
└──┤    close callbacks    │
   └───────────────────────┘
 ```